{% extends 'base.html' %}

{% load static %}
{% block content %}

<hr>
<br>
<div class = "container">
  <div class = "d-flex justify-content-center">
    <h1><b>ğŸï¸{{movie.title}}ğŸï¸</b></h1>
  </div>
</div>

<div class="card mb-3">
  <img src="{{ movie.poster_path}}" class="card-img-top" alt="{{movie.title }} poster">
  <div class="card-body">
    <h5 class="card-title"><b>{{movie.title}}</b></h5>
    <br>
    <p class="card-text">ê°œë´‰ì¼ì: {{movie.release_date|date:'Y-m-d'}}</p>
    <p class="card-text">ì¥ë¥´: {% for genre in movie.genres.all %} {{genre}} {% endfor %}</p>
    <p class="card-text">ê´€ê°ìˆ˜: {{movie.vote_count}}</p>
    <p class="card-text">í‰ì : {{movie.vote_average}}</p>
    <p class="card-text"><small class="text-muted">{{movie.overview}}</small></p>
    
  </div>
</div>

<a class="btn btn-secondary btn-sm" href="{% url 'movies:index' %}">ëª©ë¡</a>
  <div class="d-md-flex justify-content-md-end">
    <a class="btn btn-primary me-md-2" href = "{% url 'movies:recommend' movie.pk %}">ë‹¤ë¥¸ì˜í™” ì¶”ì²œë°›ê¸°</a>
  </div>
  <hr>

  <p class = "fs-1"><b>ğŸ‘©â€ğŸ’»ğŸ‘¨â€ğŸ’»<b></p>
  {% for comment in comments %}
    <div class = "container">
      <ul>
        <li>ì‘ì„±ì: {{ comment.user }} </li>
        <li> ë¦¬ë·°: {{ comment.content }}</li>
        {% if comment.rank == 0 %}
        <li><img src="{% static '0.png' %}" alt=""></li>
        {% elif comment.rank == 1 %}
        <li><img src="{% static '1.png' %}" alt=""></li>
        {% elif comment.rank == 2 %}
        <li><img src="{% static '2.png' %}" alt=""></li>
        {% elif comment.rank == 3 %}
        <li><img src="{% static '3.png' %}" alt=""></li>
        {% elif comment.rank == 4 %}
        <li><img src="{% static '4.png' %}" alt=""></li>
        {% elif comment.rank == 5 %}
        <li><img src="{% static '5.png' %}" alt=""></li>
        {% elif comment.rank == 6 %}
        <li><img src="{% static '6.png' %}" alt=""></li>
        {% elif comment.rank == 7 %}
        <li><img src="{% static '7.png' %}" alt=""></li>
        {% elif comment.rank == 8 %}
        <li><img src="{% static '8.png' %}" alt=""></li>
        {% elif comment.rank == 9 %}
        <li><img src="{% static '9.png' %}" alt=""></li>
        {% elif comment.rank == 10 %}
        <li><img src="{% static '10.png' %}" alt=""></li>
        {% endif %}
        <div class = "d-flex justify-content-end">
        {% if comment.user == request.user %}
        <a class = "also_btn" href = "{% url 'movies:comments_update' movie.pk comment.pk %}">ëŒ“ê¸€ ìˆ˜ì •</a>
        <form action = "{% url 'movies:comments_delete' movie.pk comment.pk %}" method = "POST">
          {% csrf_token %}
          <input type="submit" value = "ëŒ“ê¸€ ì‚­ì œ">
        </form>
        {% endif %}
        </div>
      </ul>
    </div>

  {% empty %}
    <p>â¬‡ï¸ ì•„ë˜ì— ì˜í™” ë¦¬ë·° ì‘ì„±í•˜ê¸° â¬‡ï¸</p>
  {% endfor %}

  <hr>
  <p><b>ğŸ“ğŸ“<b></p>
  {% if request.user.is_authenticated %}
    <form action="{% url 'movies:comments_create' movie.pk %}" method="POST">
      {% csrf_token %}
      <div class = "container">
        <div class = "row">
          <div class = "col-10">
            ëŒ“ê¸€: {{comment_form.content}}
            <br>
            í‰ì : {{comment_form.rank}}
          </div>
          <div class = "col-2">
            <div class = "d-flex align-items-end">
              <input type="submit" value ="ëŒ“ê¸€ ë“±ë¡">
            </div>
          </div>
        </div>
      </div>
    </form>
  {% else %}
    <a href="{% url 'accounts:login' %}">ëŒ“ê¸€ì„ ì‘ì„±í•˜ë ¤ë©´ ë¡œê·¸ì¸í•˜ì„¸ìš”</a>
  {% endif %}
<br>
<br>
{% endblock content %}